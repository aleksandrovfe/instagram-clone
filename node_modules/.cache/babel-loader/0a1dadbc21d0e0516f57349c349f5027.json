{"ast":null,"code":"var _jsxFileName = \"/Users/aleksandrov/WebstormProjects/instagram/src/App.js\";\nimport React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport { Post } from \"./Post\";\nimport { db, auth } from './firebase';\nimport Modal from \"@material-ui/core/Modal\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Input from \"@material-ui/core/Input\";\nimport { ImageUploader } from \"./ImageUpload\";\nimport Avatar from \"@material-ui/core/Avatar\";\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const [modalStyle] = useState(getModalStyle);\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [openNewPost, setOpenNewpost] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n\n  const signUp = event => {\n    event.preventDefault();\n    auth.createUserWithEmailAndPassword(email, password).then(authUser => {\n      return authUser.user.updateProfile({\n        displayName: userName\n      });\n    }).catch(error => alert(error.message));\n    setOpen(false);\n  };\n\n  const signIn = event => {\n    event.preventDefault();\n    auth.signInWithEmailAndPassword(email, password).catch(error => alert(error.message));\n    setOpenSignIn(false);\n  };\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(authUser => {\n      if (authUser) {\n        setUser(authUser);\n      } else {\n        setUser(null);\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [user, userName]);\n  useEffect(() => {\n    db.collection('posts').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        post: doc.data()\n      })));\n    });\n    setOpenNewpost(false);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__modal-image\",\n    src: \"https://logos-world.net/wp-content/uploads/2020/04/Instagram-Logo.png\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"User name\",\n    type: \"text\",\n    value: userName,\n    onChange: e => setUserName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, \"Sign up\")))), /*#__PURE__*/React.createElement(Modal, {\n    open: openSignIn,\n    onClose: () => setOpenSignIn(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__modal-image\",\n    src: \"https://logos-world.net/wp-content/uploads/2020/04/Instagram-Logo.png\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: signIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, \"Sign In\")))), /*#__PURE__*/React.createElement(\"header\", {\n    className: \"app__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__header-image\",\n    src: \"https://logos-world.net/wp-content/uploads/2020/04/Instagram-Logo.png\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }), user ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header-login-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 30\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__avatar\",\n    alt: \"username\",\n    src: \"/assets/5.jpg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app__user-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  }, user.displayName), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setOpenNewpost(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, \"New post\")) : null), user ? /*#__PURE__*/React.createElement(Button, {\n    onClick: () => auth.signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 26\n    }\n  }, \"Logout\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setOpenSignIn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, \"Sign up\"))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"app__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: openNewPost,\n    onClose: () => setOpenNewpost(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, (user === null || user === void 0 ? void 0 : user.displayName) ? /*#__PURE__*/React.createElement(ImageUploader, {\n    userName: user.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 47\n    }\n  }) : /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"app__body-upload-unauth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 95\n    }\n  }, \"Log in to upload\"))), posts.map(({\n    id,\n    post\n  }) => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Post, {\n    user: user,\n    postId: id,\n    userName: post.userName,\n    caption: post.caption,\n    imageUrl: post.ImageUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 29\n    }\n  })))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/aleksandrov/WebstormProjects/instagram/src/App.js"],"names":["React","useEffect","useState","Post","db","auth","Modal","makeStyles","Button","Input","ImageUploader","Avatar","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","openSignIn","setOpenSignIn","openNewPost","setOpenNewpost","userName","setUserName","email","setEmail","password","setPassword","user","setUser","signUp","event","preventDefault","createUserWithEmailAndPassword","then","authUser","updateProfile","displayName","catch","error","alert","message","signIn","signInWithEmailAndPassword","unsubscribe","onAuthStateChanged","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","post","data","e","target","value","signOut","caption","ImageUrl"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './App.scss';\nimport {Post} from \"./Post\";\nimport {db, auth} from './firebase'\nimport Modal from \"@material-ui/core/Modal\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Input from \"@material-ui/core/Input\";\nimport {ImageUploader} from \"./ImageUpload\";\nimport Avatar from \"@material-ui/core/Avatar\";\n\n\nfunction getModalStyle() {\n    const top = 50;\n    const left = 50;\n\n    return {\n        top: `${top}%`,\n        left: `${left}%`,\n        transform: `translate(-${top}%, -${left}%)`,\n    };\n}\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        position: 'absolute',\n        width: 400,\n        backgroundColor: theme.palette.background.paper,\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing(2, 4, 3),\n    },\n}));\n\nfunction App() {\n    const classes = useStyles()\n    const [modalStyle] = useState(getModalStyle)\n\n    const [posts, setPosts] = useState([])\n    const [open, setOpen] = useState(false)\n    const [openSignIn, setOpenSignIn] = useState(false)\n    const [openNewPost, setOpenNewpost] = useState(false)\n    const [userName, setUserName] = useState('')\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [user, setUser] = useState(null)\n\n    const signUp = (event) => {\n        event.preventDefault()\n\n        auth.createUserWithEmailAndPassword(email, password)\n            .then(authUser => {\n                return authUser.user.updateProfile({\n                    displayName: userName\n                })\n            })\n            .catch((error) => alert(error.message))\n\n        setOpen(false)\n    }\n\n    const signIn = (event) => {\n        event.preventDefault()\n\n        auth.signInWithEmailAndPassword(email, password)\n            .catch((error) => alert(error.message))\n\n        setOpenSignIn(false)\n    }\n\n    useEffect(() => {\n        const unsubscribe = auth.onAuthStateChanged((authUser) => {\n            if (authUser) {\n                setUser(authUser)\n            } else {\n                setUser(null)\n            }\n        })\n\n        return () => {\n            unsubscribe()\n        }\n    }, [user, userName])\n\n    useEffect(() => {\n        db.collection('posts').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n            setPosts(snapshot.docs.map(doc => ({\n                id: doc.id,\n                post: doc.data(),\n            })))\n        })\n\n        setOpenNewpost(false)\n    }, [])\n\n    return (\n        <div className=\"app\">\n            <Modal\n                open={open}\n                onClose={() => setOpen(false)}\n            >\n                <div style={modalStyle} className={classes.paper}>\n                    <form className=\"app__modal\">\n                        <img\n                            className='app__modal-image'\n                            src=\"https://logos-world.net/wp-content/uploads/2020/04/Instagram-Logo.png\"\n                            alt=\"logo\"\n                        />\n                        <Input\n                            placeholder=\"User name\"\n                            type=\"text\"\n                            value={userName}\n                            onChange={(e) => setUserName(e.target.value)}\n                        />\n                        <Input\n                            placeholder=\"Email\"\n                            type=\"text\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                        />\n                        <Input\n                            placeholder=\"Password\"\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <Button onClick={signUp}>Sign up</Button>\n                    </form>\n                </div>\n            </Modal>\n\n            <Modal\n                open={openSignIn}\n                onClose={() => setOpenSignIn(false)}\n            >\n                <div style={modalStyle} className={classes.paper}>\n                    <form className=\"app__modal\">\n                        <img\n                            className='app__modal-image'\n                            src=\"https://logos-world.net/wp-content/uploads/2020/04/Instagram-Logo.png\"\n                            alt=\"logo\"\n                        />\n                        <Input\n                            placeholder=\"Email\"\n                            type=\"text\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                        />\n                        <Input\n                            placeholder=\"Password\"\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <Button onClick={signIn}>Sign In</Button>\n                    </form>\n                </div>\n            </Modal>\n\n            <header className='app__header'>\n                <div className=\"app__header-login\">\n                    <img\n                        className='app__header-image'\n                        src=\"https://logos-world.net/wp-content/uploads/2020/04/Instagram-Logo.png\"\n                        alt=\"logo\"\n                    />\n                    {user\n                        ?   (<div className=\"app__header-login-wrapper\">\n                                <Avatar className=\"post__avatar\"  alt='username' src=\"/assets/5.jpg\" />\n                                <p className=\"app__user-name\">{user.displayName}</p>\n                                <Button onClick={() => setOpenNewpost(true)}>New post</Button>\n                            </div>\n                        ) : null\n                    }\n                </div>\n                {user\n                    ?   (<Button onClick={() => auth.signOut()}>Logout</Button>)\n                    :   (\n                        <div>\n                            <Button onClick={() => setOpenSignIn(true)}>Sign in</Button>\n                            <Button onClick={() => setOpen(true)}>Sign up</Button>\n                        </div>\n                        )\n                }\n            </header>\n\n            <section className=\"app__body\">\n                <Modal\n                    open={openNewPost}\n                    onClose={() => setOpenNewpost(false)}\n                >\n                    <div style={modalStyle} className={classes.paper}>\n                        {user?.displayName ? (<ImageUploader userName={user.displayName}/>) : <h3 className='app__body-upload-unauth'>Log in to upload</h3>}\n                    </div>\n                </Modal>\n                {/*{user?.displayName ? (<ImageUploader userName={user.displayName}/>) : <h3 className='app__body-upload-unauth'>Log in to upload</h3>}*/}\n\n                {\n                    posts.map(({id, post}) => (\n                        <React.Fragment key={id}>\n                            <Post\n                                user={user}\n                                postId={id}\n                                userName={post.userName}\n                                caption={post.caption}\n                                imageUrl={post.ImageUrl}\n                            />\n                        </React.Fragment>\n                    ))\n                }\n            </section>\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}